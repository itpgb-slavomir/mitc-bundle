<!-- config/packages/prod/monolog.xml -->
<container
	xmlns="http://symfony.com/schema/dic/services"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:monolog="http://symfony.com/schema/dic/monolog"
	xsi:schemaLocation="http://symfony.com/schema/dic/services
        https://symfony.com/schema/dic/services/services-1.0.xsd
        http://symfony.com/schema/dic/monolog
        https://symfony.com/schema/dic/monolog/monolog-1.0.xsd">

	<monolog:config>

		<monolog:handler
			name="main"
			handler="nested"
			action-level="error"
			type="fingers_crossed">

			<excluded-http-codes>
				<excluded-http-code code="404" />
				<excluded-http-code code="405" />
			</excluded-http-codes>

		</monolog:handler>

		<monolog:handler
			name="nested"
			type="stream"
			path="%kernel.logs_dir%/%kernel.environment%.log"
			level="debug" />

		<monolog:handler
			name="console"
			type="console"
			process-psr-3-messages="false"
			level="debug">

			<monolog:channels>
				<monolog:channel>!event</monolog:channel>
				<monolog:channel>!doctrine</monolog:channel>
			</monolog:channels>

		</monolog:handler>

		<monolog:handler
			name="deprecation"
			type="stream"
			path="%kernel.logs_dir%/%kernel.environment%.deprecations.log">

		</monolog:handler>

		<monolog:handler
			name="deprecation_filter"
			type="filter"
			handler="deprecation"
			process-psr-3-messages="false"
			max-level="info">

			<monolog:channels>
				<monolog:channel>php</monolog:channel>
			</monolog:channels>

		</monolog:handler>

	</monolog:config>

</container>